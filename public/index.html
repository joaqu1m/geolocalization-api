<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>localGet</title>
</head>
<body>
    <p id="textoCordenadas"></p>
    <button onclick="selecionar()">selecionar</button>
    <button onclick="selecionarComParametros()">selecionar com parametros</button>
    <button onclick="inserir()">inserir</button>
    <button onclick="inserirAI()">inserir sabendo insert do auto_increment</button>
    <p id="recebido" style="background-color: black; color: white;"></p>
</body>
</html>
<script>
    var lat = 0
    var lng = 0
    var nomeServer = 0
    var lng = 0
    function enviarDados(position) {
        lat = position.coords.latitude
        lng = position.coords.longitude
        textoCordenadas.innerHTML = `Latitude: ${lat}<br>Longitude: ${lng}`
    }
    navigator.geolocation.getCurrentPosition(enviarDados)

    function inserir() {
        recebido.innerHTML = ""
        var nomeVar = lat
        var emailVar = lng
        var telVar = 2
        var senhaVar = "z"

        fetch("/query/inserir", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie variáveis que enviam os valores coletados aqui
                nomeServer: nomeVar,
                emailServer: emailVar,
                telServer: telVar,
                senhaServer: senhaVar
            })
        }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    if (resposta != null) {
                        recebido.innerHTML = "Inserido com sucesso"
                    }
                })
            }
        })
    }

    function inserirAI() {
        recebido.innerHTML = ""
        var nomeVar = lat
        var emailVar = lng
        var telVar = 2
        var senhaVar = "z"

        fetch("/query/inserir", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie variáveis que enviam os valores coletados aqui
                nomeServer: nomeVar,
                emailServer: emailVar,
                telServer: telVar,
                senhaServer: senhaVar
            })
        }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    recebido.innerHTML = `Inserido com sucesso! id retornado do auto increment: ${resposta.insertId}`
                })
            }
        })
    }

    function selecionar() {
        recebido.innerHTML = ""
        fetch("/query/selecionar", {
            method: "GET"
        }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    for (i = 0; i < resposta.length; i++) {
                        recebido.innerHTML += `${JSON.stringify(resposta[i])} <br>`
                    }
                })
            }
        })
    }

    function selecionarComParametros() {
        recebido.innerHTML = ""
        var valores = ["valores a enviar", "a", "b"]
        fetch(`/query/selecionar/${valores}`, {
            method: "GET"
        }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    for (i = 0; i < resposta.length; i++) {
                        recebido.innerHTML += `${JSON.stringify(resposta[i])} <br>`
                    }
                })
            }
        })
    }
</script>